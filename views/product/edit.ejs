<!--Form for editing the product names and descriptions (not capacity or UM)-->

<div class="row" style="text-align: center">
    <form action="/product/update" method="post" class="branch-edit">
        <h2>Edit Product Information - <% if (product.discontinued === true) { %>
                <font color="red"><abbr title="已停用"><span class="glyphicon glyphicon-ban-circle"></span></abbr>
                <% } %>
            <%= product.inventory_name %>
        <% if (product.discontinued === true) { %>
            </font>
                <% } %>
        </h2>
        
        <div class="input-group"><span class="input-group-addon" id="basic-addon1">內用品名</span><input type="text" class="form-control" aria-describedby="basic-addon1" placeholder="Inventory Name" name="inventory_name" value="<%= product.inventory_name %>"></div>
        
        <div class="input-group"><span class="input-group-addon" id="basic-addon1">標籤品名</span><input type="text" class="form-control" aria-describedby="basic-addon1" placeholder="Name on Label" name="product_label" value="<%= product.product_label %>"></div>
        
        <div class="input-group"><span class="input-group-addon" id="basic-addon1">英文品名</span><input type="text" class="form-control" aria-describedby="basic-addon1" placeholder="English Name" name="english_name" value="<%= product.english_name %>"></div>
        
        <div class="row">
            <div class="col-md-4">
                <div class="input-group">
                    <span class="input-group-addon" id="basic-addon1">容器簡寫</span>
                    <input type="text" class="form-control" aria-describedby="basic-addon1" placeholder="Container Abbreviation" name="SKU" value="<%= product.SKU %>" maxlength="2">
                </div>
            </div>
        
            <div class="col-md-4">
                <div class="input-group">
                    <span class="input-group-addon" id="basic-addon1">容量</span>
                    <input type="text" class="form-control" aria-describedby="basic-addon1" placeholder="Capacity" name="units" value="<%= product.units %>" disabled>
                </div>
            </div>
        
            <div class="col-md-4">
                <div class="input-group">
                    <span class="input-group-addon" id="basic-addon1">單位</span>
                    <input type="text" class="form-control" aria-describedby="basic-addon1" placeholder="Unit Measurement" name="UM" value="<%= product.UM %>" disabled>
                </div>
            </div>
        </div>
        
        <div class="input-group"><span class="input-group-addon" id="basic-addon1">容器描述</span><input type="text" class="form-control" aria-describedby="basic-addon1" placeholder="Container Description" name="SKUlong" value="<%= product.SKUlong %>"></div>
        
        <div class="input-group"><span class="input-group-addon" id="basic-addon1">備註</span><input type="text" class="form-control" aria-describedby="basic-addon1" placeholder="NOTE" name="note" value="<%= product.note %>"></div>
        <br>
        <div class="row">
        <div class="col-md-3"><div class="input-group input-group-sm"><span class="input-group-addon" style="border-color:red;" id="basic-addon1">MPN</span><input style="background-color:pink; border-color:red;" type="text" class="form-control" aria-describedby="basic-addon1" name="MPN" value="<%= product.MPN %>" readonly></div></div>
        
        <div class="col-md-9"><div class="input-group input-group-sm"><span class="input-group-addon" style="border-color:red;" id="basic-addon1">JSON</span><input style="background-color:pink; border-color:red;" type="text" class="form-control" aria-describedby="basic-addon1" name="json" value="<%= JSON.stringify(product.json) %>"></div></div>
        </div>
        <br>
        
        <% var flash = req.flash('message'); %>
        <% if(flash.length) { %>
        <p class="bg-success">
        <%- flash %>
            </p>
        <% } %>
        
<div class="row vcenter"><div class="col-md-6">
    <input type="submit" class="btn btn-lg btn-primary btn-block" value="UPDATE" /></div>
    <div class="col-md-6">
        <% if (product.group !== undefined) { %>
        <input type="cancel" class="btn btn-lg btn-danger btn-block" value="EXIT" onclick="javascript:window.location='../../product/show/<%= product.group.name %>'" /></div></div>
        <% } else { %>
        <input type="cancel" class="btn btn-lg btn-danger btn-block" value="EXIT" onclick="javascript:window.location='../../product/'" /></div></div>
        <% } %>
        <input type="hidden" name="_csrf" value="<%= _csrf %>" />
        
        <br>
        <p class="bg-info"><%= product.orders.length %> order record(s) in the database</p>
       
        <% if (product.orders.length === 0) { %>
        <a href="/product/destroy/<%= product.MPN.split('%').join('-percent-') %>" class="btn btn-sm btn-danger">Delete</a>
        <% } else { %>
            <% if (product.discontinued === true) { %>
            <a href="/product/toggle_discontinued/<%= product.MPN.split('%').join('-percent-') %>" class="btn btn-lg btn-warning">Re-activate?</a>
            <% } else { %>
            <a href="/product/toggle_discontinued/<%= product.MPN.split('%').join('-percent-') %>" class="btn btn-lg btn-warning">Discontinue?</a>
            <% } %>
        <% } %>

    </form>
</div>